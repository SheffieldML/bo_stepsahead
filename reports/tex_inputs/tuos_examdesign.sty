
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{comment}

\newenvironment{mainfont}{\begin{sf}}{\end{sf}}
\newcommand{\mybf}{\bf\sf}
%\renewenvironment{mainfont}{\begin{tt}}{\end{tt}}
%\renewcommand{\mybf}{\bf\tt}
\newlength{\qupartSpacing}

\setlength{\parskip}{2mm}
\setlength{\parindent}{0mm}
\setlength{\topmargin}{-11.5mm}
\setlength{\textheight}{246mm}
\setlength{\oddsidemargin}{-5mm}
\setlength{\evensidemargin}{-5mm}
\setlength{\textwidth}{166mm}
\setlength{\qupartSpacing}{3mm}

%%% Settings for examdesign template
\SectionFont{\normalsize} % The default value
\SectionPrefix{\arabic{sectionindex}. }
%\renewcommand{\theenumi}{\roman{enumi}}
\renewcommand{\theenumi}{\alph{enumi}}
\begin{examtop}
     \examonly{\studentRegistrationNo}%
\end{examtop}
\begin{examclosing}
  {\centerline{{\bf END OF QUESTION PAPER}}}
\end{examclosing}
\newenvironment{exquestion}[1]{\begin{shortanswer}[title={#1},resetcounter=yes,rearrange=no]
\renewcommand{\theenumi}{\alph{enumi}}
}{\end{shortanswer}}

\newenvironment{quparts}{\begin{enumerate}[i.]}{\end{enumerate}}
\newenvironment{exmultiplechoice}[1]{\begin{multiplechoice}[title={#1}, resetcounter=yes,rearrange=no]
\renewcommand{\theenumi}{\roman{enumi}}
}{\end{multiplechoice}}

\pagestyle{empty}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0mm}
\renewcommand{\footrulewidth}{0mm}
\cfoot{{\bf\thepage}}
\lfoot{{\bf\pressmarktext}}
\rhead{{\bf\pressmarktext}}
\lhead{\tuoslogo}
\rfoot[{\bf CONTINUED}]{{\bf TURN OVER}}

\newcommand{\examsection}[1]%
   {\begin{center}{\mybf SECTION #1}\end{center}}

\newlength{\mymarklength}

\newcommand{\mymarktext}[1]{%
   \settowidth{\mymarklength}{#1}%
   \addtolength{\mymarklength}{-3mm}%
   \rule{\mymarklength}{0mm}%
   \hfill
   \makebox[0mm][l]{\hspace*{-1\mymarklength}\hspace*{2mm}#1}}

\newcommand{\mymark}[1]{\mymarktext{[#1 marks]}}
\newcommand{\mymarkone}{\mymarktext{[1 mark]}}

\newcommand{\mypercent}[1]{\mymarktext{[#1\%]}}

%% %\newcounter{questionnumber}
%% \newcounter{qupartnumber}[questionnumber]
%% \newcounter{exitemnumber}[qupartnumber]

%% \newcounter{answerWidth:exam}
%% \setcounter{answerWidth:exam}{167}
%% \newcounter{answerWidth:question}
%% \setcounter{answerWidth:question}{158}
%% \newcounter{answerWidth:qupart}
%% \setcounter{answerWidth:qupart}{148}
%% \newcounter{answerWidth:exlist}
%% \setcounter{answerWidth:exlist}{135}
%% \newcounter{answerWidth}
%% \setcounter{answerWidth}{\value{answerWidth:exam}}

%% \newenvironment{question}%
%%     {\stepcounter{questionnumber}%
%%      \setcounter{answerWidth}{\value{answerWidth:question}}%
%%      \begin{list}{}{\setlength{\leftmargin}{6mm}
%%                     \setlength{\labelwidth}{4mm}
%%                     \setlength{\labelsep}{2mm}
%%                     \setlength{\topsep}{4mm}
%%                     \setlength{\rightmargin}{4mm}}%
%%      \item[{\mybf\arabic{questionnumber}.}]}%
%%     {\end{list}%
%%      \setcounter{answerWidth}{\value{answerWidth:exam}}}

%% \newenvironment{qupart}%
%%     {\stepcounter{qupartnumber}%
%%      \setcounter{answerWidth}{\value{answerWidth:qupart}}%
%%      \vspace*{\qupartSpacing}%
%%      \begin{list}{}{\setlength{\leftmargin}{10mm}
%%                     \setlength{\labelwidth}{4mm}
%%                     \setlength{\labelsep}{6mm}
%%                     \setlength{\topsep}{-1mm}
%%                     \setlength{\itemsep}{0mm}
%%                     \setlength{\rightmargin}{0mm}}%
%%      \item[{\alph{qupartnumber})}]}%
%%     {\end{list}%
%%     \setcounter{answerWidth}{\value{answerWidth:question}}}

%% \newenvironment{exlist}%
%%    {\begin{list}{}{%
%%     \setcounter{answerWidth}{\value{answerWidth:exlist}}%
%%     \setlength{\leftmargin}{12mm}%
%%     \setlength{\labelwidth}{8mm}%
%%     \setlength{\labelsep}{4mm}%
%%     \setlength{\topsep}{3mm}%
%%     \setlength{\itemsep}{3mm}%
%%     \setlength{\rightmargin}{0mm}}}%
%%    {\end{list}%
%%     \setcounter{answerWidth}{\value{answerWidth:qupart}}}

%% \newcommand{\exitem}%
%%     {\stepcounter{exitemnumber}%
%%      \item[{(\roman{exitemnumber})}]}

\newcommand{\tuoslogo}{%
     \setlength{\unitlength}{1mm}%
     \begin{picture}(0,0)%
     \put(0,-25){\includegraphics[height=25mm]{tuoslogo_bw_nobo}}%
     \linethickness{0.1mm}%
     \put(85,5){\line(-1,0){110.2}}%
     \linethickness{0.4mm}%
     \put(85,5){\line(0,-1){35}}%
     \linethickness{0.6mm}%
     \put(85,-30){\line(-1,0){110.2}}%
     \end{picture}%
     \renewcommand{\tuoslogo}{}}

\begin{frontmatter}
      \examonly{\vspace*{35mm}}
     \showTitleModelSolutions% 
     \showDataProvided
     \examonly{\vspace*{15mm}}
     \examonly{\doNotRemoveText}%
     \\[5mm]
     {\departmenttext \hfill \examdatetext \\[6mm]
     \examtitletext \hfill \examtimetext 
     \\[9mm] \rubrictext}%
     \resetanswersonly%
     \answersonly{\lhead{{\bf UNIVERSITY OF SHEFFIELD}}}
     \answersonly{\rfoot{}}
     \examonly{\studentRegistrationNo}%
     \examonly{\newpage\lhead{}}
\end{frontmatter}%
%% \begin{endmatter}
%%     {\questionsend
%%  \rfoot{}}
%% \end{endmatter}

\newcommand{\questioncontinued}%
   {\examonly{\vspace*{5mm}%
              \hfill \hfill {\bf QUESTION CONTINUED ON THE NEXT PAGE}%
              \newpage}}

\newcommand{\examtitletext}{}
\newcommand{\examtitle}[1]{\renewcommand{\examtitletext}{#1}}
\newcommand{\degreestext}{}
\newcommand{\degrees}[1]{\renewcommand{\degreestext}{#1}}
\newcommand{\departmenttext}{}
\newcommand{\department}[1]{\renewcommand{\departmenttext}{#1}}
\newcommand{\pressmarktext}{}
\newcommand{\pressmark}[1]{\renewcommand{\pressmarktext}{#1}}
\newcommand{\examdatetext}{}
\newcommand{\examdate}[1]{\renewcommand{\examdatetext}{#1}}
\newcommand{\examtimetext}{}
\newcommand{\examtime}[1]{\renewcommand{\examtimetext}{#1}}
\newcommand{\rubrictext}{}
\newcommand{\rubric}[1]{\renewcommand{\rubrictext}{#1}}
\newcommand{\universitytext}{{\bf THE UNIVERSITY OF SHEFFIELD}}
\newcommand{\university}[1]{\renewcommand{\universitytext}{#1}}

\newcommand{\showDataProvided}{{\bf Data Provided: 
      \dataProvidedText}}
\newcommand{\dataProvidedText}{{\bf None}}
\newcommand{\dataProvided}[1]{%
   \renewcommand{\dataProvidedText}{%
       {\bf ~ \\ \parbox[t]{100mm}{\bf#1}}}}

\newcommand{\setterText}{}
\newcommand{\setter}[1]{\renewcommand{\setterText}{#1}}

\newcommand{\showTitleModelSolutions}{}

\newcommand{\examonly}[1]{#1}
\newcommand{\answersonly}[1]{#1}
\newcommand{\resetanswersonly}{\renewcommand{\answersonly}[1]{}}

\excludecomment{answer}

\newcommand{\showanswers}{
   \renewenvironment{answer}%
      {\begin{answershown}}%
      {\end{answershown}}%
   \renewcommand{\examonly}[1]{}%
   \renewcommand{\resetanswersonly}{}%
   \renewcommand{\showTitleModelSolutions}{~\\%
      \centerline{\underline{\large\bf MODEL SOLUTIONS}}%
      \\[10mm]%
%      {\bf SETTER(S):}~%
      {\bf SETTER:}~%
      \parbox[t]{100mm}{\bf\setterText}%
      \\[5mm]}}

\newenvironment{answershown}%
      {\vspace*{4mm}%
       \makebox[0mm][l]{%
          \setlength{\unitlength}{1mm}%
          \linethickness{0.4mm}%
          \begin{picture}(0,0)
          \put(-2,4){\line(0,-1){4}}
          \put(\value{answerWidth},4){\line(0,-1){4}}
          \addtocounter{answerWidth}{2}
          \put(-2,4){\line(1,0){\value{answerWidth}}}
          \addtocounter{answerWidth}{-2}
          \end{picture}}{\sc answer:}\\[2mm]}%
      {\\ \makebox[0mm][l]{%
          \setlength{\unitlength}{1mm}%
          \linethickness{0.3mm}%
          \begin{picture}(0,0)
          \put(-2,0){\line(0,1){3}}
          \put(\value{answerWidth},0){\line(0,1){3}}
          \addtocounter{answerWidth}{2}
          \put(-2,0){\line(1,0){\value{answerWidth}}}
          \addtocounter{answerWidth}{-2}
          \end{picture}}\vspace*{2mm}}

\newcommand{\studentRegistrationNo}{%
    \vfill
    {\bf Registration number from U-Card (9 digits) 
         --- to be completed by student } \\[3mm]
    ~ \hspace*{77mm}%
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|}\hline
    ~~~~ & ~~~~ & ~~~~ & ~~~~ & ~~~~ & ~~~~ 
    & ~~~~ & ~~~~ & ~~~~ \\[4mm] \hline
    \end{tabular}
    \vspace*{10mm}}

\newcommand{\doNotRemoveText}{}
\newcommand{\doNotRemove}{%
   \renewcommand{\doNotRemoveText}{%
       \\
       {\bf PLEASE LEAVE THIS EXAM PAPER ON YOUR DESK.\\
            DO NOT REMOVE IT FROM THE HALL.}\vspace*{10mm}}%
}

