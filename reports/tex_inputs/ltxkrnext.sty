%%
%% This is file `ltxkrnext.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% ltxkrnext.dtx  (with options: `kernel')
%% 
%% This is a generated file;
%% altering it directly is inadvisable;
%% instead, modify the original source file.
%% See the URL in the file 00readme.txt.
%% 
%% Copyright notice.
%% 
%%    These files are distributed
%%    WITHOUT ANY WARRANTY; without even the implied warranty of
%%    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
%% 
%% \CharacterTable
%%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%%   Digits        \0\1\2\3\4\5\6\7\8\9
%%   Exclamation   \!     Double quote  \"     Hash (number) \#
%%   Dollar        \$     Percent       \%     Ampersand     \&
%%   Acute accent  \'     Left paren    \(     Right paren   \)
%%   Asterisk      \*     Plus          \+     Comma         \,
%%   Minus         \-     Point         \.     Solidus       \/
%%   Colon         \:     Semicolon     \;     Less than     \<
%%   Equals        \=     Greater than  \>     Question mark \?
%%   Commercial at \@     Left bracket  \[     Backslash     \\
%%   Right bracket \]     Circumflex    \^     Underscore    \_
%%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%%   Right brace   \}     Tilde         \~}%
%%%  @LaTeX-file{
%%%     filename        = "ltxkrnext.dtx",
%%%     version         = "0.0a1",
%%%     date            = "1999/06/12",
%%%     time            = "11:23:00 GMT",
%%%     checksum        = "1726",
%%%     author          = "Arthur Ogawa (mailto:ogawa@teleport.com)",
%%%     copyright       = "Copyright (C) 1999 Arthur Ogawa,
%%%                        all rights reserved.  Copying of this file is
%%%                        authorized only if either:
%%%                        (1) you make absolutely no changes to your copy,
%%%                        including name; OR
%%%                        (2) if you do make changes, you first rename it
%%%                        to some other name.",
%%%     address         = "Arthur Ogawa,
%%%                        USA",
%%%     telephone       = "",
%%%     FAX             = "",
%%%     email           = "ogawa@teleport.com",
%%%     codetable       = "ISO/ASCII",
%%%     keywords        = "latex, core, kernel",
%%%     supported       = "yes",
%%%     abstract        = "modifications of the latex kernel",
%%%     docstring       = "The checksum field above generated by ltxdoc",
%%%  }
\NeedsTeXFormat{LaTeX2e}[1995/12/01]%
\ProvidesFile{ltxkrnext.sty}%
 [1999/06/08 0.0a2 latex kernel package]% \fileversion
\def\class@name{ltxkrnext}%
\expandafter\PackageInfo\expandafter{\class@name}{%
 Extensions to the \protect\LaTeXe\space kernel,
 by A. Ogawa (ogawa@teleport.com)%
}%
\def\@to{to}%
\newcommand\ulap[1]{\vbox\@to\z@{{\vss#1}}}%
\newcommand\dlap[1]{\vbox\@to\z@{{#1\vss}}}%
\newcommand\let@environment[2]{%
 \expandafter\let
 \csname#1\expandafter\endcsname\csname#2\endcsname
 \expandafter\let
 \csname end#1\expandafter\endcsname\csname end#2\endcsname
 }%
\newcommand\say[1]{\typeout{<\noexpand#1=\meaning#1>}}%
\newcommand\saythe[1]{\typeout{<\noexpand#1=\the#1>}}%
\ifx\other\undefined\chardef\other12\relax\fi
{\catcode`\p\other\catcode`\t\other\gdef\@FM#1pt{#1}}%
\def\scale@fsize#1{%
 \@tempdima=\f@size\p@
 \@tempdima=#1\@tempdima
 \edef\f@size{\expandafter\@FM\the\@tempdima}%
}%
\newcommand\tracingplain{%
 \tracingonline\z@\tracingcommands\z@\tracingstats\z@
 \tracingpages\z@\tracingoutput\z@\tracinglostchars\@ne
 \tracingmacros\z@\tracingparagraphs\z@\tracingrestores\z@
 \showboxbreadth5\showboxdepth3\relax %\errorstopmode
 }%
\newcommand\traceoutput{%
 \appdef\@resetactivechars{\showoutput}%
}%
\newcommand\nohyphenation{\kern\z@}%
\newcommand\offhyphenation{%
 \lefthyphenmin\maxdimen
 \emergencystretch8\p@
}%
\def\prepdef#1#2{%
 \@ifxundefined#1{\toks@{}}{\toks@\expandafter{#1}}%
 \toks@ii{#2}%
 \edef#1{\the\toks@ii\the\toks@}%
}%
\def\appdef#1#2{%
 \@ifxundefined#1{\toks@{}}{\toks@\expandafter{#1}}%
 \toks@ii{#2}%
 \edef#1{\the\toks@\the\toks@ii}%
}%
\def\appgdef{%
 \afterassignment\afterassignment
 \afterassignment\global
 \appdef
}%
\toksdef\toks@ii=\tw@
\long\def\@ifxundefined#1{\@ifx{\undefined#1}}%
\long\def\@ifnotrelax#1#2#3{\@ifx{\relax#1}{#3}{#2}}%
\long\def\@argswap#1#2{#2#1}%
\long\def\@argswap@val#1#2{#2{#1}}%
\def\@boolean#1#2{%
  \long\def#1{%
    #2% \if<something>
      \expandafter\boolean@true
    \else
      \expandafter\boolean@false
    \fi
  }%
}%
\def\@boole@def#1#{\@boolean{#1}}% Implicit #2
\def\@booleantrue#1{\let#1\boolean@true}%
\def\@booleanfalse#1{\let#1\boolean@false}%
\@boole@def\@ifx#1{\ifx#1}%
\@boole@def\@ifx@empty#1{\ifx\@empty#1}%
\@boole@def\@ifempty#1{\if!#1!}%
\@boole@def\@ifcat#1{\ifcat#1}%
\@boole@def\@ifdim#1{\ifdim#1}%
\@boole@def\@ifeof#1{\ifeof#1}%
\@boole@def\@ifhbox#1{\ifhbox#1}%
\@boole@def\@ifhmode{\ifhmode}%
\@boole@def\@ifinner{\ifinner}%
\@boole@def\@ifmmode{\ifmmode}%
\@boole@def\@ifnum#1{\ifnum#1}%
\@boole@def\@ifodd#1{\ifodd#1}%
\@boole@def\@ifvbox#1{\ifvbox#1}%
\@boole@def\@ifvmode{\ifvmode}%
\@boole@def\@ifvoid#1{\ifvoid#1}%
\long\def\boolean@true#1#2{#1}%
\long\def\boolean@false#1#2{#2}%
\long\def\loopuntil#1{#1{}{\loopuntil{#1}}}%
\long\def\loopwhile#1{#1{\loopwhile{#1}}{}}%
\long\def\attribute#1#2{\do@apply\re@apply@i{\def@the#1}#2\@EOI}%
\long\def\do@apply#1#2#3{\@ifx{\@EOI#3}{}{#1{#2}#3}}%
\def\@EOI{end-of-information\error}%
\long\def\re@apply@i#1#2#3{#1#2{#3}\do@apply\re@apply@i{#1}}%
\def\use@the#1#2{%
 \csname\expandafter\@gobble\string#1'\expandafter\@gobble\string#2\endcsname
}%
\long\def\acton@the#1#2#3{%
  \expandafter\expandafter\expandafter\@argswap\use@the#2#3{#1}%
}%
\long\def\acton@the@val#1#2#3{%
  \expandafter\expandafter\expandafter\@argswape\use@the#2#3{#1}%
}%
\long\def\@argswape#1#2{%
 \expandafter\@argswap@val\expandafter{#1}{#2}%
}%
\def\def@the{\acton@the\def}%
\def\let@the{\acton@the\let}%
\def\@ifknown@the{\acton@the\@ifnotrelax}%
\renewcommand\addpenalty[1]{%
  \ifvmode
    \if@minipage
    \else
      \if@nobreak
      \else
        \ifinner
          \@tempskipa\lastskip \unskip
          \@tempcnta\lastpenalty \unpenalty
          \ifnum#1<\@tempcnta
            \penalty#1\relax
          \else
            \penalty\@tempcnta
          \fi
          \vskip\@tempskipa
        \else
          \ifdim\lastskip=\z@
            \penalty#1\relax
          \else
            \@tempskipb\lastskip
            \vskip-\lastskip
            \penalty#1%
            \vskip\@tempskipb
          \fi
        \fi
      \fi
    \fi
  \else
    \@noitemerr
  \fi
}%
\renewcommand\addvspace[1]{%
  \ifvmode
    \if@minipage
    \else
      \ifinner
        \@tempskipa\lastskip \unskip
        \ifdim\@tempskipa=\z@
          \vskip#1\relax
        \else
          \@tempskipb#1\relax
          \ifdim\@tempskipa<\@tempskipb
            \vskip\@tempskipb
          \else
            \ifdim\@tempskipb<\z@
              \ifdim\@tempskipa<\z@
                \vskip\@tempskipa
              \else
                \advance\@tempskipb\@tempskipa
                \vskip\@tempskipb
              \fi
            \else
              \vskip\@tempskipa
            \fi
          \fi
        \fi
      \else
        \ifdim\lastskip=\z@
          \vskip#1\relax
        \else
          \@tempskipb#1\relax
          \@xaddvskip
        \fi
      \fi
    \fi
  \else
    \@noitemerr
  \fi
}%
\def\@outputdblcol{%
  \if@firstcolumn
    \global \@firstcolumnfalse
    \global \setbox\@leftcolumn \box\@outputbox
    \xdef\@firstcolumn@mark{\firstmark}%AO
    \xdef\@topcolumn@mark{\topmark}%AO
    \mark{\botmark}%
  \else
    \global \@firstcolumntrue
    \let\firstmark\@firstcolumn@mark%AO
    \let\topmark\@topcolumn@mark%AO
    \setbox\@outputbox \vbox {%
                         \hb@xt@\textwidth {%
                           \hb@xt@\columnwidth {%
                             \box\@leftcolumn \hss}%
                           \hfil
                           \vrule \@width\columnseprule
                           \hfil
                           \hb@xt@\columnwidth {%
                             \box\@outputbox \hss}%
                                             }%
                              }%
    \@combinedblfloats
    \@outputpage
    \begingroup
      \@dblfloatplacement
      \@startdblcolumn
      \@whilesw\if@fcolmade \fi
        {\@outputpage
         \@startdblcolumn}%
    \endgroup
  \fi
}%
\def\@firstcolumn@mark{{}{}}%
\def\@topcolumn@mark{{}{}}%
\def\@footnotetext{% Implict #1
 \insert\footins\bgroup % \egroup in \set@footnotetext
  \interlinepenalty\interfootnotelinepenalty
  \splittopskip\footnotesep
  \splitmaxdepth\dp\strutbox
  \floatingpenalty \@MM
  \set@footnotetext{p@footnote}%
}%
\def\@mpfootnotetext{% Implict #1
 \global\setbox\@mpfootins\vbox\bgroup % \egroup in \set@footnotetext
  \unvbox\@mpfootins
  \set@footnotetext{p@mpfootnote}%
}%
\long\def\set@footnotetext#1#2{%
  \reset@font\footnote@size
  \hsize\columnwidth
  \@parboxrestore
  \protected@edef\@currentlabel{%
   \csname #1\endcsname\@thefnmark
  }%
  \color@begingroup
   \@makefntext{%
    \rule\z@\footnotesep\ignorespaces
    #2\@finalstrut\strutbox
   }%
  \color@endgroup
 \egroup
}%
\AtBeginDocument{%
 \@ifx{\footnote@size\undefined}{%
  \let\footnote@size\footnotesize
 }{}%
 \@ifx{\mp@footnoterule\undefined}{%
  \let\mp@footnoterule\footnoterule
 }{}%
}%
\def\footnotenote{\xdef\@thefnmark{\relax}\@footnotetext}%
\def\footnotemark{%
 \@ifnextchar[%
  \@xfootnotemark
  {\stepcounter\@mpfn\protected@xdef\@thefnmark{\thempfn}%
   \@footnotemark
  }%
}%
\def\@xfootnotemark[#1]{%
 \begingroup
  \csname c@\@mpfn\endcsname#1\relax
  \unrestored@protected@xdef\@thefnmark{\thempfn}%
 \endgroup
 \@footnotemark
}%
\def\set@mp@footnote{%
 \def\@mpfn{mpfootnote}%
 \def\thempfn{\thempfootnote}%
 \global\c@mpfootnote\z@
 \let\@footnotetext\@mpfootnotetext
}%
\def\put@mp@footins{%
 \ifvoid\@mpfootins\else
  \vskip\skip\@mpfootins
  \normalcolor
  \mp@footnoterule
  \unvbox\@mpfootins
 \fi
}%
\def\eqnarray@broken{%
   \stepcounter{equation}%
   \def\@currentlabel{\p@equation\theequation}%
   \global\@eqnswtrue
   \m@th
   \global\@eqcnt\z@
   \tabskip\@centering
   \let\\\@eqncr
   $$\everycr{}\halign to\displaywidth\bgroup
       \hskip\@centering$\displaystyle\tabskip\z@skip{##}$\@eqnsel
      &\global\@eqcnt\@ne\hskip \tw@\arraycolsep \hfil${##}$\hfil
      &\global\@eqcnt\tw@ \hskip \tw@\arraycolsep
         $\displaystyle{##}$\hfil\tabskip\@centering
      &\global\@eqcnt\thr@@ \hb@xt@\z@\bgroup\hss##\egroup
         \tabskip\z@skip
      \cr
}
\long\def\eqnarray@fleqn@fixed{%
 \stepcounter{equation}\def\@currentlabel{\p@equation\theequation}%
 \global\@eqnswtrue\m@th\global\@eqcnt\z@
 \tabskip\mathindent
 \let\\=\@eqncr
 \setlength\abovedisplayskip{\topsep}%
 \ifvmode\addtolength\abovedisplayskip{\partopsep}\fi
 \addtolength\abovedisplayskip{\parskip}%
 \setlength\belowdisplayskip{\abovedisplayskip}%
 \setlength\belowdisplayshortskip{\abovedisplayskip}%
 \setlength\abovedisplayshortskip{\abovedisplayskip}%
 $$%
 \everycr{}%
 \halign\@to\linewidth\bgroup
  \hskip\@centering$\displaystyle\tabskip\z@skip{##}$\@eqnsel
  &\global\@eqcnt\@ne
   \hskip\tw@\eqncolsep
   \hfil${{}##{}}$\hfil
  &\global\@eqcnt\tw@
   \hskip\tw@\eqncolsep
   $\displaystyle{##}$\hfil\tabskip\@centering
  &\global\@eqcnt\thr@@\hb@xt@\z@\bgroup\hss##\egroup
   \tabskip\z@skip
  \cr
}%
\ifx\eqnarray\eqnarray@broken
 \expandafter\PackageInfo\expandafter{\class@name}%
  {Repairing broken {eqnarray} definition}%
 \let\eqnarray\eqnarray@fleqn@fixed
 \newlength\eqncolsep
 \setlength\eqncolsep\z@
\fi
\let\eqnarray@broken\relax
\let\eqnarray@fleqn@fixed\relax
\def\mathindent{\@centering}%
\def\set@eqnarray@skips{}%
\renewenvironment{equation}{%
 $$
 \refstepcounter{equation}%
 }{%
 \reqno@sw{\eqno}{\leqno}\hbox{\@eqnnum}%
 $$
 \@ignoretrue
}%
\@booleantrue\reqno@sw
\def\@@eqncr{\let\reserved@a\relax
    \ifcase\@eqcnt \def\reserved@a{& & &}\or \def\reserved@a{& &}%
     \or \def\reserved@a{&}\else
       \let\reserved@a\@empty
       \@latex@error{Too many columns in eqnarray environment}\@ehc\fi
     \reserved@a
     \if@eqnsw
      \reqno@sw{\@eqnnum}{\hbox\@to\displaywidth{\@eqnnum\hfil}}%
      \stepcounter{equation}%
     \fi
     \global\@eqnswtrue\global\@eqcnt\z@\cr}%
\def\@startsection#1#2#3#4#5#6{%
 \@startsection@hook
 \if@noskipsec \leavevmode \fi
 \par
 \@tempskipa #4\relax
 \@afterindenttrue
 \ifdim \@tempskipa <\z@
  \@tempskipa -\@tempskipa \@afterindentfalse
 \fi
 \if@nobreak
  \everypar{}%
 \else
  \addpenalty\@secpenalty\addvspace\@tempskipa
 \fi
 \@ifstar
  {\@ssect{#3}{#4}{#5}{#6}}%
  {\@dblarg{\@sect{#1}{#2}{#3}{#4}{#5}{#6}}}%
}%
\def\@startsection@hook{}%
\expandafter\PackageInfo\expandafter{\class@name}%
  {Repairing broken definition of \string\@sect.}%
\def\@sect#1#2#3#4#5#6[#7]#8{%
  \ifnum #2>\c@secnumdepth
    \let\@svsec\@empty
  \else
    \refstepcounter{#1}%
    \protected@edef\@svsec{\noexpand\@seccntformat{#1}\relax}%
  \fi
  \@tempskipa #5\relax
  \ifdim \@tempskipa>\z@
    \begingroup
      #6{%
        \@hangfrom{\hskip #3\relax\@svsec}%
          {\interlinepenalty \@M #8\@@par}}%
    \endgroup
    \csname #1mark\endcsname{#7}%
    \addcontentsline{toc}{#1}{%
      \ifnum #2>\c@secnumdepth \else
        \protect\numberline{\csname the#1\endcsname}%
      \fi
      #7}%
  \else
    \def\@svsechd{%
      #6{\hskip #3\relax
      \@svsec #8}%
      \csname #1mark\endcsname{#7}%
      \addcontentsline{toc}{#1}{%
        \ifnum #2>\c@secnumdepth \else
          \protect\numberline{\csname the#1\endcsname}%
        \fi
        #7}}%
  \fi
  \@xsect{#5}}%
\expandafter\PackageInfo\expandafter{\class@name}%
  {Repairing broken definition of \string\@ssect.}%
\def\@ssect#1#2#3#4#5{%
  \@tempskipa #3\relax
  \ifdim \@tempskipa>\z@
    \begingroup
      #4{%
        \@hangfrom{\hskip #1}%
          {\interlinepenalty \@M #5\@@par}}%
    \endgroup
  \else
    \def\@svsechd{#4{\hskip #1\relax #5}}%
  \fi
  \@xsect{#3}}
\def\sec@upcase#1{\relax{#1}}%
\renewenvironment{itemize}{%
 \ifnum \@itemdepth >\thr@@\@toodeep\else
  \advance\@itemdepth\@ne
  \edef\@itemitem{labelitem\romannumeral\the\@itemdepth}%
  \expandafter\list\csname\@itemitem\endcsname{%
   \csname item@\romannumeral\the\@itemdepth\endcsname
  }%
 \fi
}{%
 \endlist
}%
\def\item@i{}%
\renewenvironment{enumerate}{%
 \ifnum\@enumdepth>\thr@@\@toodeep\else
  \advance\@enumdepth\@ne
  \edef\@enumctr{enum\romannumeral\the\@enumdepth}%
  \expandafter\list\csname label\@enumctr\endcsname{%
   \usecounter\@enumctr
   \csname enum@\romannumeral\the\@enumdepth\endcsname
  }%
 \fi
}{%
 \endlist
}%
\def\enum@i{%
 \def\makelabel##1{\hss\llap{##1}}%
}%
\newlength\@trimwidth
\newlength\@trimheight
\newlength\@headmargin
\newlength\@guttermargin
\def\marginparright  {\@twosidetrue\@reversemarginfalse\@mparswitchfalse}%
\def\marginparleft   {\@twosidetrue\@reversemargintrue \@mparswitchfalse}%
\def\marginparoutside{\@twosidetrue\@reversemarginfalse\@mparswitchtrue }%
\def\marginparinside {\@twosidetrue\@reversemargintrue \@mparswitchtrue }%
\def\page@left@sw{\@ifodd\c@page{\recto@left@sw}{\verso@left@sw}}%
\newdimen\marginpartotal
\AtBeginDocument{%
 \if@reversemargin\expandafter\@booleantrue\else\expandafter\@booleanfalse\fi
 \recto@left@sw
 \if@reversemargin\expandafter\boolean@true\else\expandafter\boolean@false\fi{%
  \if@mparswitch\expandafter\@booleanfalse\else\expandafter\@booleantrue\fi
 }{%
  \if@mparswitch\expandafter\@booleantrue\else\expandafter\@booleanfalse\fi
 }%
 \verso@left@sw
 \setlength\marginpartotal\marginparwidth\addtolength\marginpartotal\marginparsep
 \@ifdim{\@trimwidth=\z@}{\setlength\@trimwidth{\paperwidth}}{}%
 \@ifdim{\@trimheight=\z@}{\setlength\@trimheight{\paperheight}}{}%
 \@ifdim{\@guttermargin=\z@}{\setlength\@guttermargin{\oddsidemargin}}{}%
 \setlength\oddsidemargin{\@guttermargin}%
 \recto@left@sw{\addtolength\oddsidemargin{\marginpartotal}}{}%
 \setlength\evensidemargin{\@trimwidth}%
 \addtolength\evensidemargin{-\@guttermargin}%
 \addtolength\evensidemargin{-\textwidth}%
 \verso@left@sw{}{\addtolength\evensidemargin{-\marginpartotal}}%
}%
\newcommand\obsolete@class[1]{%
 \expandafter\ClassWarning\expandafter{\class@name}{%
  Command \protect#1\space is deprecated in this class.
  Please remove it from your document%
 }%
}%
\AtBeginDocument{%
 \let\small@size\small
 \def\small{\obsolete@class{\small}}%
 \def\footnotesize{\obsolete@class{\footnotesize}}%
 \def\scriptsize{\obsolete@class{\scriptsize}}%
 \def\tiny{\obsolete@class{\tiny}}%
 \def\large{\obsolete@class{\large}}%
 \def\Large{\obsolete@class{\Large}}%
 \def\LARGE{\obsolete@class{\LARGE}}%
 \def\huge{\obsolete@class{\huge}}%
 \def\Huge{\obsolete@class{\Huge}}%
}%
\def\cleartorecto{%
 \clearpage
 \if@twoside
  \ifodd\c@page\else
   \clearblankpage
  \fi
 \fi
}%
\def\cleartoverso{%
 \clearpage
 \if@twoside
  \ifodd\c@page
   \clearblankpage
  \else
  \fi
 \fi
}%
\def\clearblankpage{%
 \hbox{}\thispagestyle{clearedpage}\newpage
 \if@twocolumn\hbox{}\newpage\fi
}%
\def\ps@clearedpage{}%
\newdimen\@pageskipunit \setlength{\@pageskipunit}{1\p@}%
\newdimen\@pagestretchunit \setlength{\@pagestretchunit}{.15\p@}%
\newdimen\@pageshrinkunit \setlength{\@pageshrinkunit}{.01\p@}%
\newcommand\@pageskip[1]{%
 #1\@pageskipunit \@plus#1\@pagestretchunit \@minus#1\@pageshrinkunit
 }%
\newcommand\@pagekern[1]{%
 #1\@pageskipunit
 }%
\def\@gobblestaroption{%
 \@ifstar{\@testopt{\ignorespaces}{}}{\@testopt{\ignorespaces}{}}%
}%
\def\@gobblebreak{\unskip\ \@gobblestaroption}
\def\redocumentclass{\@testopt{\re@documentclass}{}}%
\def\re@documentclass[#1]#2{%
 \def\@currname{#2}%
 \let\@currext\@clsextension
 \def\@curroptions{#1}%
 \@process@pti@ns
 \@nameuse{\@currname.\@currext-reh@@k}%
}%
\let\@floatboxreset@org\@floatboxreset
\appdef\@floatboxreset{%
 \@endfloatbox % close out the box assignment
 \afterassignment\@applycaption
 \@assignfloatbox % re-open box assignment
  \let\@makecaption\@capturecaption
  \global\let\@caption@arg@i\undefined
}%
\def\@assignfloatbox{%
 \global\setbox\@currbox
  \color@vbox
   \normalcolor
   \vbox\bgroup
    \hsize\columnwidth
    \@parboxrestore
    \@floatboxreset@org
    \set@mp@footnote
    \csname\@captype @just\endcsname
}%
\def\@capturecaption#1#2{%
 \gdef\@caption@arg@i{#1}\gdef\@caption@arg@ii{#2}%
}%
\def\@applycaption{\aftergroup\@apply@caption}%
\def\@apply@caption{%
 \expandafter\let\expandafter\@tempa\csname @apply@\@captype caption\endcsname
 \@ifx{\@tempa\relax}{\@apply@@caption}{\@tempa}%
}%
\def\@apply@@caption{%
 \@assignfloatbox
  \box\@currbox
  \prevdepth\z@
  \put@mp@footins
  \@ifxundefined\@caption@arg@i{}{%
   \expandafter\let\expandafter\@tempa\csname @make\@captype caption\endcsname
   \@ifx{\@tempa\relax}{\@makecaption}{\@tempa}\@caption@arg@i\@caption@arg@ii
  }%
 \@endfloatbox
}%
\newcommand\toprule{\tab@rule{\column@font}{\column@fil}{\Hline@rule}}%
\newcommand\colrule{\unskip\lrstrut\\\tab@rule{}{}{\hline@rule}}%
\newcommand\botrule{\unskip\lrstrut\\\noalign{\hline@rule}}%
\def\hline{%
 \noalign{%
  \ifnum0=`}\fi
  \hline@rule
  \futurelet\@tempa\@xhline
 % \noalign ended in \@xhline
}%
\def\tab@rule#1#2#3{%
 \crcr
 \noalign{%
  #3%
  \gdef\@arstrut@hook{%
   \global\let\@arstrut@hook\@empty
   \frstrut
  }%
  \gdef\cell@font{#1}%
  \gdef\cell@fil{#2}%
 }%
}%
\def\Hline@rule{\hline@rule}%
\def\hline@rule{\hrule\@height\arrayrulewidth}%
\def\column@font{}%
\def\column@fil{}%
\def\frstrut{}%
\def\lrstrut{}%
\appdef\@arstrut{\@arstrut@hook}%
\let\@arstrut@hook\@empty
\def\@addtopreamble{\appdef\@preamble}%
\def\array{%
 \let\@acoll\@arrayacol
 \let\@acol\@arrayacol
 \let\@acolr\@arrayacol
 \let\@classz\@arrayclassz
 \let\@classiv\@arrayclassiv
 \let\\\@arraycr
 \let\@halignto\@empty
 \@tabarray
}%
\def\@tabular{%
 \leavevmode\hbox\bgroup$
  \let\@acoll\@tabacoll
  \let\@acol\@tabacol
  \let\@acolr\@tabacolr
  \let\@classz\@tabclassz
  \let\@classiv\@tabclassiv
  \let\\\@tabularcr
  \@tabarray
}%
\def\@array[#1]#2{%
 \if#1t\vtop\else\if#1b\vbox\else\vcenter\fi\fi\bgroup
  \setbox\@arstrutbox\hbox{%
    \vrule \@height\arraystretch\ht\strutbox
           \@depth \arraystretch\dp\strutbox
           \@width\z@
  }%
  \def\@preamble{\tabskip\tabmid@skip\@arstrut}%
  \@mkpream{#2}%
  \@addtopreamble{\tabskip\tabright@skip\cr}%
  \let\tabularnewline\\%
  \let\par\@empty
  \let\@sharp##%
  \set@typeset@protect
  \lineskip\z@skip
  \baselineskip\z@skip
  \tabskip\tableft@skip
  \expandafter\ialign\expandafter\@halignto\expandafter\bgroup\@preamble
}%
\def\multicolumn#1#2#3{%
 \multispan{#1}%
 \begingroup
  \let\@preamble\@empty
  \@mkpream{#2}%
  \def\@sharp{#3}%
  \let\protect\relax
 %\let\@startpbox\@@startpbox\let\@endpbox\@@endpbox
  \@arstrut
  \@preamble
  \hbox{}%
 \endgroup
 \ignorespaces
}%
\def\@mkpream#1{%
 \@firstamptrue
 \@lastchclass6
 \let\protect\@unexpandable@protect
 \let\@sharp\relax
 \@expast{#1}%
 \expandafter\@tfor\expandafter\@nextchar\expandafter:\expandafter=\reserved@a
 \do{%
  \expandafter\@testpach\expandafter{\@nextchar}%
  \ifcase\@chclass
   \@classz
  \or
   \@classi
  \or
   \@classii
  \or
   \@classiii
  \or
   \@classiv
  \or
   \@classv
  \fi
  \@lastchclass\@chclass
 }%
  \ifcase\@lastchclass
   \@acolr
  \or
  \or
   \@preamerr\@ne
  \or
   \@preamerr\tw@
  \or
  \or
   \@acolr
  \fi
}%
\def\@addamp{%
 \if@firstamp\@firstampfalse\else\@addtopreamble{&}\fi
}%
\def\@arrayacol{%
 \@addtopreamble{\hskip\arraycolsep}%
}%
\def\@tabacoll{%
 \@addtopreamble{\hskip\tableftsep\relax}%
}%
\def\@tabacol{%
 \@addtopreamble{\hskip\tabmidsep\relax}%
}%
\def\@tabacolr{%
 \@addtopreamble{\hskip\tabrightsep\relax}%
}%
\def\@arrayclassz{%
 \ifcase\@lastchclass
  \@acolampacol
 \or
  \@ampacol
 \or
 \or
 \or
  \@addamp
 \or
  \@acolampacol
 \or
  \@firstampfalse\@acoll
 \fi
 \ifcase\@chnum
  \@addtopreamble{%
   \hfil$\relax\@sharp$\hfil
  }%
 \or
  \@addtopreamble{%
   $\relax\@sharp$\hfil
  }%
 \or
  \@addtopreamble{%
   \hfil$\relax\@sharp$%
  }%
 \fi
}%
\def\@tabclassiv{\expandafter\@addtopreamble\expandafter{\@nextchar}}%
\def\@arrayclassiv{\expandafter\@addtopreamble\expandafter{\expandafter$\@nextchar$}}%
\def\@tabclassz{%
  \ifcase\@lastchclass
    \@acolampacol
  \or
    \@ampacol
  \or
  \or
  \or
    \@addamp
  \or
    \@acolampacol
  \or
    \@firstampfalse\@acoll
  \fi
  \ifcase\@chnum
   \@addtopreamble{%
    {\hfil\cell@font\ignorespaces\@sharp\unskip\hfil}%
   }%
  \or
   \@addtopreamble{%
    {\cell@fil\hskip1sp\cell@font\ignorespaces\@sharp\unskip\hfil}%
   }%
  \or
   \@addtopreamble{%
    {\hfil\hskip1sp\cell@font\ignorespaces\@sharp\unskip\cell@fil}%
   }%
  \fi
}%
\def\@classv{%
 \expandafter\@addtopreamble
 \expandafter{%
 \expandafter\@startpbox
 \expandafter{\@nextchar}\pbox@hook\cell@font\ignorespaces\@sharp\@endpbox
 }%
}%
\def\tableft@skip{\z@skip}%
\def\tabmid@skip{\z@skip}%{\@flushglue}%
\def\tabright@skip{\z@skip}%
\def\tableftsep{\tabcolsep}%
\def\tabmidsep{\tabcolsep}%
\def\tabrightsep{\tabcolsep}%
\def\cell@font{}%
\def\cell@fil{}%
\def\pbox@hook{}%
\def\DoPdftexPrimitives{% Implicit #1#2
 \@ifxundefined\pdfpageheight{\boolean@false}{\boolean@true}%
}%
\DoPdftexPrimitives{}{\let\pdfliteral\@gobble}%
\endinput
%%
%% End of file `ltxkrnext.sty'.
