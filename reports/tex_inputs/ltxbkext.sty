%%
%% This is file `ltxbkext.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% ltxbkext.dtx  (with options: `book')
%% 
%% This is a generated file;
%% altering it directly is inadvisable;
%% instead, modify the original source file.
%% See the URL in the file 00readme.txt.
%% 
%% Copyright notice.
%% 
%%    These files are distributed
%%    WITHOUT ANY WARRANTY; without even the implied warranty of
%%    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
%% 
%% \CharacterTable
%%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%%   Digits        \0\1\2\3\4\5\6\7\8\9
%%   Exclamation   \!     Double quote  \"     Hash (number) \#
%%   Dollar        \$     Percent       \%     Ampersand     \&
%%   Acute accent  \'     Left paren    \(     Right paren   \)
%%   Asterisk      \*     Plus          \+     Comma         \,
%%   Minus         \-     Point         \.     Solidus       \/
%%   Colon         \:     Semicolon     \;     Less than     \<
%%   Equals        \=     Greater than  \>     Question mark \?
%%   Commercial at \@     Left bracket  \[     Backslash     \\
%%   Right bracket \]     Circumflex    \^     Underscore    \_
%%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%%   Right brace   \}     Tilde         \~}%
%%%  @LaTeX-file{
%%%     filename        = "ltxbkext.dtx",
%%%     version         = "0.0a0",
%%%     date            = "1999/06/04",
%%%     time            = "11:23:00 GMT",
%%%     checksum        = "884",
%%%     author          = "Arthur Ogawa (mailto:ogawa@teleport.com)",
%%%     copyright       = "Copyright (C) 1999 Arthur Ogawa,
%%%                        all rights reserved.  Copying of this file is
%%%                        authorized only if either:
%%%                        (1) you make absolutely no changes to your copy,
%%%                        including name; OR
%%%                        (2) if you do make changes, you first rename it
%%%                        to some other name.",
%%%     address         = "Arthur Ogawa,
%%%                        USA",
%%%     telephone       = "",
%%%     FAX             = "",
%%%     email           = "ogawa@teleport.com",
%%%     codetable       = "ISO/ASCII",
%%%     keywords        = "latex, ltxdoc",
%%%     supported       = "yes",
%%%     abstract        = "modifications of the latex book class",
%%%     docstring       = "The checksum field above generated by ltxdoc",
%%%  }
\NeedsTeXFormat{LaTeX2e}[1995/12/01]%
\ProvidesFile{ltxbkext.sty}%
 [1999/06/04 0.0a0 latex book extensions]% \fileversion
\def\class@name{ltxbkext}%
\expandafter\PackageInfo\expandafter{\class@name}{%
 An extension to the \protect\LaTeXe\space book class
 by A. Ogawa (ogawa@teleport.com)%
}%
\def\maketitle@chapter{%
 \immediate\write\@mainaux{\string\chapter@appendices}%
 \expandafter\chapter\expandafter{\@title}%
 \@ifx@empty\@author{}{%
  \expandafter\@argswap
  \expandafter{%
  \expandafter{\@author}}{\addcontentsline{toc}{author}}%
  \let\@author\@empty
 }%
}%
\appdef\frontmatter{%
 \pagestyle{frontmatter}%
}%
\def\ps@frontmatter{%
 \ps@null
 \c@secnumdepth\thesecnumdepth@front\relax
}%
\def\thesecnumdepth@front{\z@}%
\appdef\mainmatter{%
 \after@maketitle
 \let\@author\@empty
 \let\maketitle\maketitle@chapter
 \pagestyle{mainmatter}%
}%
\def\ps@mainmatter{%
 \ps@normalheadings
 \c@secnumdepth\thesecnumdepth\relax
}%
\AtBeginDocument{%
 \edef\thesecnumdepth{\the\c@secnumdepth}%
}%
\appdef\backmatter{%
 \after@maketitle
 \let\@author\@empty
 \let\maketitle\maketitle@chapter
 \pagestyle{backmatter}%
}%
\def\ps@backmatter{\ps@normalheadings}%
\newcommand\epigraph[2]{\appdef\@epigraph{\do@epigraph{#1}{#2}}}%
\def\do@epigraph{}%
\renewcommand\title[1]{\appdef\@title{\do@title{#1}}}%
\let\@title\@empty
\def\do@title{}%
\renewcommand\author[1]{\appdef\@author{\do@author{#1}}}%
\let\@author\@empty
\def\do@author{}%
\renewcommand\date[1]{\appdef\@date{\do@date{#1}}}%
\def\do@date{}%
\def\subtitle{\def\@subtitle}%
\def\@subtitle{}%
\def\edition{\def\@edition}%
\def\@edition{}%
\def\editor{\def\@editor}%
\def\@editor{}%
\def\imprint{\def\@imprint}%
\def\@imprint{}%
\def\seriestitle{\def\@seriestitle}%
\def\@seriestitle{}%
\def\serieseditor{\def\@serieseditor}%
\def\@serieseditor{}%
\def\after@maketitle{%
 \setcounter{footnote}{0}%
 \global\let\thanks\@gobble
 \global\let\@maketitle\relax
 \global\let\@thanks\@empty
 \global\let\@date\@empty
 \global\let\@title\@empty
 \global\let\@epigraph\@empty
}%
\appdef\frontmatter{\@driver@toc@write{toc}{\string\frontmatter@toc}}%
\appdef\mainmatter{\@driver@toc@write{toc}{\string\mainmatter@toc}}%
\appdef\appendix{\@driver@toc@write{toc}{\string\appendix@toc}}%
\appdef\backmatter{\@driver@toc@write{toc}{\string\backmatter@toc}}%
\def\@driver@toc@write#1#2{%
 \if@filesw
  \@ifnum{\@auxout=\@partaux}{%
   \addtocontents{#1}{#2}%
  }{%
   \immediate\write\@mainaux{\string\@writefile{#1}{#2}}%
  }%
 \fi
}%
\def\frontmatter@toc{\c@tocdepth-\tw@\let\l@chapter\l@chapter@front}%
\def\mainmatter@toc{\c@tocdepth\thetocdepth\relax\let\l@chapter\l@chapter@main}%
\def\backmatter@toc{\c@tocdepth\z@\let\l@chapter\l@chapter@front}%
\def\appendix@toc{\let\l@chapter\l@appendix}%
\AtBeginDocument{\edef\thetocdepth{\number\c@tocdepth}\let\l@chapter@main\l@chapter}%
\def\nonumberline{\hb@xt@\leftskip{\hfil}}%
\def\l@appendix{\l@chapter@main}%
\def\l@chapter@front{\l@chapter@main}%
\def\maketitle{%
 \par
 \cleartorecto
 \@title
 \par
 \cleartorecto
 \@title
 \par
 \@subtitle
 \@edition
 \par
 \@author
 \par
 \@editor
 \par
 \vfil
 \@imprint
 \par
 \pagebreak
}%
\newenvironment{seriespage}{%
 \par
 \clearpage
 \@seriestitle
 \par
 \@serieseditor
 \par
}{%
 \newpage
}%
\newenvironment{copyrightpage}{%
 \par
 \clearpage
}{%
 \par
 \newpage
}%
\newenvironment{CIP}{%
 \par
 Library of Congress Cataloging-in-Publication Data\par
}{%
 \par
}%
\newenvironment{dedicationpage}{%
 \par
 \clearpage
}{%
 \par
 \newpage
}%
\newenvironment{acknowledgmentspage}{%
 \par
 \cleartorecto
 \chapter{\acknowledgmentsname}%
}{%
 \par
 \newpage
}%
\def\acknowledgmentsname{Acknowledgments}%
\newenvironment{epigraphpage}{%
 \par
 \clearpage
 \let@environment{epigraph}{epigraph@page}%
}{%
 \par
 \newpage
}%
\newenvironment{epigraph@page}{%
 \par
 \ignorespaces
}{%
 \par
}%
\newenvironment{source}{%
 \par
 \ignorespaces
}{%
 \par
}%
\def\start@tableof#1#2{%
 \if@twocolumn\@restonecoltrue\onecolumn\else\@restonecolfalse\fi
% Commented by Neil to fix table of contents.
% \chapter{#1}%
 \chapter*{#1}%
 \begingroup
  \pagestyle{#2}%
  \@starttoc{#2}%
  \if@restonecol\twocolumn\else\clearpage\fi
 \endgroup
}%
\def\@starttoc#1{%
 \@starttoc@init
 \@input{\jobname.#1}%
 \if@filesw
  \expandafter\newwrite\csname tf@#1\endcsname
  \immediate\openout \csname tf@#1\endcsname \jobname.#1\relax
 \fi
 \@nobreakfalse
}%
\def\@starttoc@init{%
 \makeatletter
}%
\renewcommand\tableofcontents{%
\start@tableof\contentsname{toc}%
\@driver@toc@write{toc}{\string\c@tocdepth\string\z@}%
}%
\renewcommand\listoffigures{\start@tableof\listfigurename{lof}}%
\renewcommand\listoftables{\start@tableof\listtablename{lot}}%
\newenvironment{contributorspage}{%
 \par
 \cleartorecto
 \chapter{\contributorsname}%
 \offhyphenation
 \parindent\z@
 \rightskip\z@\@plus.5\hsize
 \parskip3\p@
 \raggedright
}{%
 \par
 \clearpage
}%
\def\contributorsname{Contributors}%
\renewcommand\part{%
 \clearpartpage
 \thispagestyle{part}%
 \if@twocolumn
  \@restonecoltrue\onecolumn
 \else
  \@restonecolfalse
 \fi
 \secdef\@part\@spart
}%
\def\@endpart{%
 \if@twoside
  \null
  \thispagestyle{null}%
  \newpage
 \fi
 \if@restonecol
  \twocolumn
 \fi
}%
\def\thepart{\@Roman\c@part}%
\def\@part[#1]#2{%
 \ifnum \c@secnumdepth >-\tw@
  \refstepcounter{part}%
  \addcontentsline{toc}{part}{\protect\numberline{\thepart}#1}%
 \else
  \addcontentsline{toc}{part}{#1}%
 \fi
 \partmark{#1}%
 \ifnum \c@secnumdepth >-\tw@
  \@makepartheads{\@makepartnumber\partname\thepart}{#2}%
 \else
  \@makepartheads{}{#2}%
 \fi
}%
\def\@spart#1{%
 \@makepartheads{}{#1}%
}%
\def\@makepartheads#1#2{%
 \null\vfil
 \begingroup
  \centering
  \interlinepenalty \@M
  \normalfont
  #1\Huge\bfseries#2\par
 \endgroup
 \vfil\newpage
 \@endpart
}%
\def\@makepartnumber#1#2{%
 \huge\bfseries
 #1~#2\par
 \vskip 20\p@
}%
\def\clearpartpage{%
 \if@openright
  \cleartorecto
 \else
  \clearpage
 \fi
}%
\def\ps@part{\ps@null}%
\def\partmark#1{%
 \markboth{#1}{#1}%
}%
\renewcommand\chapter{%
 \clearchapterpage
 \thispagestyle{chapter}%
 \global\@topnum\z@
 \@afterindentfalse
 \secdef\@chapter\@schapter
}%
\def\@chapter[#1]#2{%
 \@ifnum{\c@secnumdepth>\m@ne}{%
  \@mainmatter@sw{%
   \boolean@true
  }{%
   \boolean@false
  }%
 }{%
  \boolean@false
 }{%
  \@@chapter{#1}{#2}%
 }{%
  \@schapter{#2}%
 }%
}%
\@boole@def\@mainmatter@sw{\if@mainmatter}%
\def\@@chapter#1#2{%
 \refstepcounter{chapter}%
 \typeout{\@chapapp\space\thechapter.}%
 \addcontentsline{toc}{chapter}{\protect\numberline{\thechapter}#1}%
 \chaptermark{#1}%
 \addtocontents{lof}{\protect\addvspace{10\p@}}%
 \addtocontents{lot}{\protect\addvspace{10\p@}}%
 \if@twocolumn
  \@topnewpage[\@makechapterhead{\@makechapternumber\@chapapp\thechapter}{#2}]%
 \else
  \@makechapterhead{\@makechapternumber\@chapapp\thechapter}{#2}%
  \@afterheading
 \fi
 \after@maketitle
}%
\def\@schapter#1{%
 \addcontentsline{toc}{chapter}{\protect\nonumberline#1}%
 \chaptersmark{#1}%
 \addtocontents{lof}{\protect\addvspace{10\p@}}%
 \addtocontents{lot}{\protect\addvspace{10\p@}}%
 \if@twocolumn
  \@topnewpage[\@makeschapterhead{#1}]%
 \else
  \@makeschapterhead{#1}%
  \@afterheading
 \fi
 \after@maketitle
}%
\def\@makechapterhead#1#2{%
 \begingroup
  \vspace*{\chaptersinkage}%
  #1%
  \begingroup
   \parfillskip\z@
   \leftskip\z@\@plus1fil\relax
   \offhyphenation
   \fontsize{30}{30}%
   \usefont\encodingdefault\rmdefault\mddefault\updefault
   \noindent#2\par
  \endgroup
 \endgroup
 \addvspace{\@pageskip{75}}%
}%
\def\@makeschapterhead#1{%
 \begingroup
  \vspace*{\chaptersinkage}%
  \begingroup
   \parfillskip\z@
   \leftskip\z@\@plus1fil\relax
   \offhyphenation
   \fontsize{30}{30}%
   \usefont\encodingdefault\rmdefault\mddefault\updefault
   \noindent#1\par
  \endgroup
 \endgroup
 \addvspace{\@pageskip{75}}%
}%
\def\@makechapternumber#1#2{%
 \begingroup
  \parfillskip\z@
  \leftskip\z@\@plus1fil\relax
  \noindent
  \fontsize{40}{13}%
  \usefont\encodingdefault\rmdefault\mddefault\updefault
  \begingroup
   \fontsize{12}{13}%
   \usefont\encodingdefault\rmdefault\mddefault\updefault\scshape
   \if@mainmatter#1\fi
  \endgroup
  \kern12\p@
  \if@mainmatter#2\fi\vrule\@height34\p@\@width\z@
  \par
 \endgroup
 \vspace*{8pt}%
 \@chapter@device
}%
\def\@chapter@device{%
 \begingroup
  \@tempdima0.1\p@
  \def\grayink{\color[gray]{0.5}}%
  \def\blackink{\color{black}}%
  \hrule\@height\@tempdima
  \hbox\@to\hsize{%
   \vrule\@width\@tempdima
   {%
    \grayink
    \leaders\hrule\@height\p@\hfil
   }%
   \vrule\@width\p@
  }\nointerlineskip
  \kern-\@tempdima
  \hbox\@to\hsize{%
   {%
   \kern\p@
   \leaders\hrule\@height\@tempdima\hfil
   }%
  }\nointerlineskip
  \hbox\@to\hsize{%
   \vrule\@width\@tempdima
   {%
    \grayink
    \vrule\@width\p@
   }%
   \vrule\@width\@tempdima
   {%
    \grayink
    \leaders\hrule\@height6\p@\hfil
   }%
   \vrule\@width\p@
  }%
  \hrule\@height\p@
 \endgroup
 \prevdepth\z@
}%
\def\chaptersinkage{\z@}%
\def\chaptername{C\ H\ A\ P\ T\ E\ R}%
\def\appendixname{A\ P\ P\ E\ N\ D\ I\ X}%
\let\@chapapp\chaptername
\def\clearchapterpage{%
 \if@openright\cleartorecto\else\clearpage\fi
}%
\def\chaptermark{% Implicit #1
 \markright
}%
\def\chaptermark#1{%
 \markboth{%
  \@ifx@empty\@author{%
   \@ifnum{\c@secnumdepth<\z@}{%
    #1%
   }{%
    Chapter \thechapter           % changes by Ralf Herbrich
   }%
  }{%
   \@author
  }%
 }{%
  #1%
 }%
}%
\def\chaptersmark#1{\markboth{#1}{#1}}%
\def\ps@chapter{\ps@null}%
\newcommand\openchaptermotto{\@chaptermotto}%
\newcommand\closechaptermotto{\@chaptermotto}%
\def\@chaptermotto#1#2{%
 \begingroup
  \fontsize{9}{11}%
  \usefont\encodingdefault\rmdefault\mddefault\updefault
  \flushright{\itshape#1}\\---{#2}\par
  \addvspace{\@pageskip{12}}%
 \endgroup
}%
\newenvironment{chapterintro}{\COword}{\par}%
\def\COword#1 {\noindent{\scshape\dropcap#1} }%
\def\dropcap#1{%
 \smash{%
  \fontsize{24}{13}%
  \usefont\encodingdefault\rmdefault\bfdefault\updefault
  #1%
 }%
 \ignorespaces
}%
\def\appendix{%
 \par
 \setcounter{chapter}{\z@}%
 \renewcommand\@chapapp{\appendixname}%
 \renewcommand\thechapter{\@Alph\c@chapter}%
 \@driver@toc@write{toc}{\string\appendix@toc}%
}%
\def\appendix@chapter{%
 \par
 \setcounter{section}{\z@}%
 \renewcommand\thesection{\@Alph\c@section}%
}%
\def\chapter@appendices{\global\let\appendix\appendix@chapter}%
\def\l@appendix#1#2{%
 \par
 \@ifnum{\c@tocdepth<\z@}{}{%
 \addpenalty\@highpenalty
 \addvspace{5\p@}%
 \begingroup
  \interlinepenalty\@M
  \let\numberline\n@appendix
  \leavevmode{\bfseries#1}\nobreak\hfil
  \nobreak\hb@xt@\@pnumwidth{\hss #2}\par
 \endgroup
 \nobreak
}%
}%
\def\n@appendix#1{Appendix #1:\hfil\break}%
\endinput
%%
%% End of file `ltxbkext.sty'.
